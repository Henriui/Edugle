scalar Date

# Chat message send by a user
type Message {
	# Unique identifier for the message generated by the database
	id: ID!
	# Date the message was sent
	date: Date!
	# Content of the message
	content: String!
	# User who sent the message
	sender: User!
}

type Query {
	# Returns all messages in the database
	messages: [Message]
	# Returns a message by its id
	messageById(id: ID!): Message
	# Returns all messages sent by a user
	messagesBySenderToken(token: String!): [Message]
	# Returns all messages sent by a user
	messagesBySenderId(id: ID!): [Message]
}

# Input for creating a message
input MessageInput {
	# Content of the message
	content: String!
	# User who sent the message
	senderToken: String!
}

type Subscription {
	messageCreated(chatId: ID!): Chat
}

type Mutation {
	# Creates a message
	createMessage(chat: ID!, message: MessageInput!): Message
	# Deletes a message corresponding to the given id and matching sender
	deleteMessage(id: ID!, userToken: String!): Message
	# Deletes any message corresponding to the given id as an admin
	deleteMessageAsAdmin(id: ID!, userToken: String!): Message
}
